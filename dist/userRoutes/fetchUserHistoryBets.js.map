{"version":3,"sources":["../../src/userRoutes/fetchUserHistoryBets.js"],"names":["HistoryBet","router","Router","post","req","res","weekNum","body","find","user","username","completedAt","$gte","startOf","subtract","add","format","$lte","endOf","err","result","status","send","json"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;AADA,IAAMA,aAAa,mBAASA,UAA5B;;AAEA,IAAMC,SAAS,kBAAQC,MAAR,EAAf;;AAEAD,OAAOE,IAAP,CAAY,qBAAZ;AAAA,sDAAmC,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5BC,aAD4B,GAClBF,IAAIG,IAAJ,CAASD,OADS;;AAElCN,iBAAWQ,IAAX,CAAgB,EAACC,MAAML,IAAIK,IAAJ,CAASC,QAAhB,EAA0BC,aAAa,EAACC,MAAM,wBAASC,OAAT,CAAiB,MAAjB,EAAyBC,QAAzB,CAAkCR,OAAlC,EAA2C,KAA3C,EAAkDS,GAAlD,CAAsD,CAAtD,EAAyD,KAAzD,EAAgEC,MAAhE,EAAP,EAAiFC,MAAM,wBAASC,KAAT,CAAe,MAAf,EAAuBJ,QAAvB,CAAgCR,OAAhC,EAAyC,KAAzC,EAAgDS,GAAhD,CAAoD,CAApD,EAAuD,KAAvD,EAA8DC,MAA9D,EAAvF,EAAvC,EAAhB,EAAwN,UAASG,GAAT,EAAcC,MAAd,EAAqB;AAC5O,WAAGD,GAAH,EAAQd,IAAIgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,8BAArB;AACRjB,WAAIkB,IAAJ,CAASH,MAAT;AACA,OAHD;;AAFkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAnC;;AAAA;AAAA;AAAA;AAAA;;kBASenB,M","file":"fetchUserHistoryBets.js","sourcesContent":["import _ from 'lodash';\nimport moment from 'moment';\nimport BetOrder from '../models/BetOrder'\nconst HistoryBet = BetOrder.HistoryBet\nimport express from 'express';\nconst router = express.Router();\n\nrouter.post('/fetch-history-bets', async (req, res) => {\n\tconst weekNum = req.body.weekNum\n\tHistoryBet.find({user: req.user.username, completedAt: {$gte: moment().startOf('week').subtract(weekNum, 'day').add(0, 'day').format(), $lte: moment().endOf('week').subtract(weekNum, 'day').add(0, 'day').format()}}, function(err, result){\n\t\tif(err) res.status(404).send('fetch user history bet error')\n\t\tres.json(result)\n\t})\n})\n\n\nexport default router;\n\n"]}