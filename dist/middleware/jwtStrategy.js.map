{"version":3,"sources":["../../src/middleware/jwtStrategy.js"],"names":["ExtractJwt","JwtStrategy","Strategy","jwtOptions","jwtFromRequest","fromAuthHeader","secretOrKey","jwtSecret","strategy","jwt_payload","next","findOne","username","err","user"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,aAAa,sBAAYA,UAA/B;AACA,IAAMC,cAAc,sBAAYC,QAAhC;;AAGA,IAAIC,aAAa,EAAjB;AACAA,WAAWC,cAAX,GAA4BJ,WAAWK,cAAX,EAA5B;AACAF,WAAWG,WAAX,GAAyB,iBAAOC,SAAhC;;AAGA,IAAIC,WAAW,IAAIP,WAAJ,CAAgBE,UAAhB,EAA4B,UAASM,WAAT,EAAsBC,IAAtB,EAA4B;AACtE,gBAAKC,OAAL,CAAa,EAACC,UAAUH,YAAYG,QAAvB,EAAb,EAA+C,UAASC,GAAT,EAAcC,IAAd,EAAmB;AACjE,MAAGA,IAAH,EAAQ;AACPJ,QAAK,IAAL,EAAWI,IAAX;AACA,GAFD,MAEK;AACJJ,QAAK,IAAL,EAAW,KAAX;AACA;AACD,EAND;AAOA,CARc,CAAf;;kBAUeF,Q","file":"jwtStrategy.js","sourcesContent":["import config from '../config';\nimport User from '../models/User';\nimport passport from \"passport\";\nimport passportJWT from \"passport-jwt\";\nconst ExtractJwt = passportJWT.ExtractJwt;\nconst JwtStrategy = passportJWT.Strategy;\n\n\nlet jwtOptions = {}\njwtOptions.jwtFromRequest = ExtractJwt.fromAuthHeader();\njwtOptions.secretOrKey = config.jwtSecret;\n\n\nlet strategy = new JwtStrategy(jwtOptions, function(jwt_payload, next) {\n\tUser.findOne({username: jwt_payload.username}, function(err, user){\n\t\tif(user){\n\t\t\tnext(null, user);\n\t\t}else{\n\t\t\tnext(null, false)\n\t\t}\n\t})\n});\n\nexport default strategy"]}