{"version":3,"sources":["../src/index.js"],"names":["use","authenticate","session","Promise","global","connect","mongoURL","app","server","createServer","initialize","json","urlencoded","extended","static","resolve","__dirname","get","req","res","send","request","response","sendFile","listen","process","env","PORT","console","log","address","port"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AApBA,mBAASA,GAAT,wBAA0BC,YAA1B,CAAuC,KAAvC,EAA8C,EAACC,SAAS,KAAV,EAA9C;;AAEA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B,CAAkC;AAClC,mBAASE,OAAT,CAAiB,iBAAOC,QAAxB;;AAoBA,IAAIC,MAAM,wBAAV;AACAA,IAAIC,MAAJ,GAAa,eAAKC,YAAL,CAAkBF,GAAlB,CAAb;;AAEA;AACAA,IAAIP,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEA;AACAO,IAAIP,GAAJ,CAAQ,uBAAR;AACAO,IAAIP,GAAJ,CAAQ,qBAAR;AACAO,IAAIP,GAAJ,CAAQ,4BAAR;AACAO,IAAIP,GAAJ,CAAQ,+BAAR;;AAEAO,IAAIP,GAAJ,CAAQ,mBAASU,UAAT,EAAR;;AAEAH,IAAIP,GAAJ,CAAQ,qBAAWW,IAAX,EAAR;AACAJ,IAAIP,GAAJ,CAAQ,qBAAWY,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;;AAEAN,IAAIP,GAAJ,CAAQ,kBAAQc,MAAR,CAAe,eAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR;;AAEAT,IAAIU,GAAJ,CAAQ,MAAR,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BA,KAAIC,IAAJ,CAAS,UAAT;AACA,CAFD;;AAIAb,IAAIP,GAAJ,CAAQ,MAAR;AACAO,IAAIP,GAAJ,CAAQ,MAAR;;AAEAO,IAAIP,GAAJ,CAAQ,WAAR,EAAqB,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,CAArB;AACAK,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;AACAO,IAAIP,GAAJ,CAAQ,WAAR;;AAEA;AACAO,IAAIP,GAAJ,CAAQ,YAAR,EAAsB,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,CAAtB;AACAK,IAAIP,GAAJ,CAAQ,YAAR;;AAEAO,IAAIU,GAAJ,CAAQ,GAAR,EAAa,UAASI,OAAT,EAAkBC,QAAlB,EAA4B;AACvCA,UAASC,QAAT,CAAkB,eAAKR,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAlB;AACD,CAFD;;AAIA;AACA;AACA;AACA;AACA;;AAEAT,IAAIC,MAAJ,CAAWgB,MAAX,CAAkBC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAtC,EAA4C,YAAM;AACjDC,SAAQC,GAAR,sBAA+BtB,IAAIC,MAAJ,CAAWsB,OAAX,GAAqBC,IAApD;AACA,CAFD;;kBAIexB,G","file":"index.js","sourcesContent":["import \"babel-polyfill\";\nimport path from 'path';\nimport config from './config';\nimport http from 'http';\nimport express from 'express';\nimport cors from 'cors';\nimport morgan from 'morgan';\nimport bodyParser from 'body-parser';\nimport compress from 'compression';\nimport helmet from 'helmet';\nimport methodOverride from 'method-override';\nimport passport from \"passport\";\nimport JwtStrategy from './middleware/JwtStrategy';\npassport.use(JwtStrategy).authenticate('jwt', {session: false})\nimport mongoose from 'mongoose';\nmongoose.Promise = global.Promise;;\nmongoose.connect(config.mongoURL);\n\nimport fetchLeagues from './userRoutes/fetchLeagues';\nimport queryOdds from './userRoutes/queryOdds';\nimport straightWagerSubmit from './userRoutes/straightWagerSubmit';\nimport parlayWagerSubmit from './userRoutes/parlayWagerSubmit';\nimport fetchOpenBets from './userRoutes/fetchOpenBets';\nimport fetchHistoryBets from './userRoutes/fetchHistoryBets';\nimport fetchUserState from './userRoutes/fetchUserState';\n\nimport fetchAgentState from './agentRoutes/fetchAgentState';\n\nimport authLogin from './routes/authLogin';\nimport confirmEventsResult from './routes/confirmEventsResult';\n\nimport schedule from 'node-schedule';\nimport openBetPending from './schedule/openBetPending'\nimport openBetResult from './schedule/openBetResult'\n\n\nlet app = express();\napp.server = http.createServer(app);\n\n// logger\napp.use(morgan('dev'));\n\n// 3rd party middleware\napp.use(helmet());\napp.use(cors());\napp.use(compress());\napp.use(methodOverride());\n\napp.use(passport.initialize());\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\napp.use(express.static(path.resolve(__dirname, '../client/build')));\n\napp.get('/api', (req, res) => {\n\tres.send('test api')\n})\n\napp.use('/api', authLogin)\napp.use('/api', confirmEventsResult)\n\napp.use('/api/user', passport.authenticate('jwt', {session: false}))\napp.use('/api/user', fetchLeagues);\napp.use('/api/user', queryOdds);\napp.use('/api/user', straightWagerSubmit);\napp.use('/api/user', parlayWagerSubmit);\napp.use('/api/user', fetchOpenBets);\napp.use('/api/user', fetchHistoryBets);\napp.use('/api/user', fetchUserState);\n\n//app.use('/api/agent', passport.use(agentJwtStrategy).authenticate('jwt', {session: false}), fetchAgentState)\napp.use('/api/agent', passport.authenticate('jwt', {session: false}));\napp.use('/api/agent', fetchAgentState);\n\napp.get('*', function(request, response) {\n  response.sendFile(path.resolve(__dirname, '../client/build', 'index.html'));\n});\n\n// schedule.scheduleJob('59 * * * *', async function(){\n// \tconsole.log(new Date())\n// \tawait openBetPending()\n// \tawait openBetResult()\n// });\n\napp.server.listen(process.env.PORT || 8080, () => {\n\tconsole.log(`Started on port ${app.server.address().port}`);\n});\n\nexport default app;\n"]}