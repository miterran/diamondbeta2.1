{"version":3,"sources":["../../src/schedule/openBetPending.js"],"names":["OpenBet","find","openBets","isEmpty","Promise","all","map","openBet","events","event","eventIdx","eventStatus","get","ID","BetDetail","OddType","response","result","Object","assign","data","Final","FinalType","BetType","OddTarget","BinaryScore","Number","HomeScore","AwayScore","Sport","OddPoint","findOneAndUpdate","orderNumber","$elemMatch","OddPickID","console","log","then","catch","error","openBetPending","defaults","headers","common","apiKey"],"mappings":"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","file":"openBetPending.js","sourcesContent":["import config from '../config';\nimport BetOrder from '../models/BetOrder'\nconst OpenBet = BetOrder.OpenBet\n\nimport _ from 'lodash';\nimport axios from 'axios';\naxios.defaults.headers.common['JsonOdds-API-Key'] = config.apiKey;\n\nasync function openBetPending (){\n\n\tconst openBets = await OpenBet.find({});\n\tif(!_.isEmpty(openBets)){\n\t\tawait Promise.all(openBets.map(async openBet => {\n\t\t\tawait Promise.all(openBet.events.map(async (event, eventIdx) => {\n\t\t\t\tlet eventStatus = 'Pending';\n\t\t\t\tconst response = await axios.get(`https://jsonodds.com/api/results/getbyeventid/${event.ID}?oddType=${event.BetDetail.OddType}`);\n\t\t\t\tconst result = Object.assign({}, response.data[0]);\n\t\t\t\tif(!_.isEmpty(result)){\n\t\t\t\t\tif(result.Final){\n\t\t\t\t\t\tswitch(result.FinalType){\n\t\t\t\t\t\t\tcase 'Finished':\n\t\t\t\t\t\t\t\tswitch(event.BetDetail.BetType){\n\t\t\t\t\t\t\t\t\tcase 'M-Line':\n\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tif(event.Sport === 7){\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost' \n\t\t\t\t\t\t\t\t\t\t\t\t}else{ \n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push' \n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'Spread':\n\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) > Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) < Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) === Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'Total':\n\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'Draw':\n\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) !== Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Canceled':\n\t\t\t\t\t\t\t\teventStatus = 'Canceled'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Postponed':\n\t\t\t\t\t\t\t\teventStatus = 'Postponed'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\teventStatus = 'Review'\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\teventStatus = 'Pending';\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t}\n\t\t\t\tawait OpenBet.findOneAndUpdate({orderNumber: openBet.orderNumber, events: {$elemMatch: {'ID': event.ID, 'OddPickID': event.OddPickID, 'BetDetail.OddType': event.BetDetail.OddType}} } , { '$set': { 'events.$.Status': eventStatus, 'events.$.Result': result }})\n\t\t\t\tconsole.log('updated event result')\n\t\t\t})).then(() => {\n\t\t\t\tconsole.log('this bet result done'\n\t\t\t)}).catch((error) => {\n\t\t\t\tconsole.log('bet result update error')\n\t\t\t\tthrow error\n\t\t\t})\n\t\t})).then(() => {\n\t\t\tconsole.log('all open bets updated')\n\t\t}).catch((error) => {\n\t\t\tconsole.log('all open bets updated error')\n\t\t\tthrow error\n\t\t})\n\t}else{\n\t\tconsole.log('openBet is empty')\n\t}\n\n}\n\n\nexport default openBetPending\n\n\n"]}