{"version":3,"sources":["../../src/schedule/openBetPending.js"],"names":["OpenBet","find","openBets","isEmpty","Promise","all","map","openBet","events","event","eventIdx","eventStatus","BetDetail","OddType","get","ID","response","data","length","result","Object","assign","Final","FinalType","BetType","OddTarget","BinaryScore","Number","HomeScore","AwayScore","Sport","OddPoint","findOneAndUpdate","orderNumber","$elemMatch","OddPickID","console","log","then","catch","error","openBetPending","defaults","headers","common","apiKey"],"mappings":"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","file":"openBetPending.js","sourcesContent":["import config from '../config';\nimport BetOrder from '../models/BetOrder'\nconst OpenBet = BetOrder.OpenBet\n\nimport _ from 'lodash';\nimport axios from 'axios';\naxios.defaults.headers.common['JsonOdds-API-Key'] = config.apiKey;\n\nasync function openBetPending (){\n\n\tconst openBets = await OpenBet.find({});\n\tif(!_.isEmpty(openBets)){\n\t\tawait Promise.all(openBets.map(async openBet => {\n\t\t\tawait Promise.all(openBet.events.map(async (event, eventIdx) => {\n\t\t\t\tlet eventStatus = 'Pending';\n\t\t\t\tif(event.BetDetail.OddType === 'FirstFiveInnings'){\n\t\t\t\t\tevent.BetDetail.OddType === 'First Five Innings'\n\t\t\t\t}\n\t\t\t\tconst response = await axios.get(`https://jsonodds.com/api/results/getbyeventid/${event.ID}?oddType=${event.BetDetail.OddType}`);\n\t\t\t\tif(response.data.length === 1){\n\t\t\t\t\tconst result = Object.assign({}, response.data[0]);\n\t\t\t\t\tif(!_.isEmpty(result)){\n\t\t\t\t\t\tif(result.Final){\n\t\t\t\t\t\t\tswitch(result.FinalType){\n\t\t\t\t\t\t\t\tcase 'Finished':\n\t\t\t\t\t\t\t\t\tswitch(event.BetDetail.BetType){\n\t\t\t\t\t\t\t\t\t\tcase 'M-Line':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(event.Sport === 7){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost' \n\t\t\t\t\t\t\t\t\t\t\t\t\t}else{ \n\t\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push' \n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Spread':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) > Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) < Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) === Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Total':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Draw':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) !== Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Canceled':\n\t\t\t\t\t\t\t\t\teventStatus = 'Canceled'\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Postponed':\n\t\t\t\t\t\t\t\t\teventStatus = 'Postponed'\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\teventStatus = 'Review'\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teventStatus = 'Pending';\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t}\n\t\t\t\t\tawait OpenBet.findOneAndUpdate({orderNumber: openBet.orderNumber, events: {$elemMatch: {'ID': event.ID, 'OddPickID': event.OddPickID, 'BetDetail.OddType': event.BetDetail.OddType}} } , { '$set': { 'events.$.Status': eventStatus, 'events.$.Result': result }})\n\t\t\t\t\tconsole.log('updated event result')\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(response.data)\n\t\t\t\t}\n\t\t\t})).then(() => {\n\t\t\t\tconsole.log('this bet result done'\n\t\t\t)}).catch((error) => {\n\t\t\t\tconsole.log('bet result update error')\n\t\t\t\tthrow error\n\t\t\t})\n\t\t})).then(() => {\n\t\t\tconsole.log('all open bets updated')\n\t\t}).catch((error) => {\n\t\t\tconsole.log('all open bets updated error')\n\t\t\tthrow error\n\t\t})\n\t}else{\n\t\tconsole.log('openBet is empty')\n\t}\n\n}\n\n\nexport default openBetPending\n\n\n"]}