{"version":3,"sources":["../../src/schedule/openBetPending.js"],"names":["OpenBet","find","openBets","isEmpty","Promise","all","map","openBet","events","event","eventIdx","eventStatus","get","ID","OddDetail","OddType","response","data","length","result","Object","assign","console","log","Final","FinalType","BetDetail","BetType","OddTarget","BinaryScore","Number","HomeScore","AwayScore","Sport","OddPoint","findOneAndUpdate","orderNumber","$elemMatch","OddPickID","then","catch","error","openBetPending","defaults","headers","common","apiKey"],"mappings":"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","file":"openBetPending.js","sourcesContent":["import config from '../config';\nimport BetOrder from '../models/BetOrder'\nconst OpenBet = BetOrder.OpenBet\n\nimport _ from 'lodash';\nimport axios from 'axios';\naxios.defaults.headers.common['JsonOdds-API-Key'] = config.apiKey;\n\nasync function openBetPending (){\n\n\tconst openBets = await OpenBet.find({});\n\tif(!_.isEmpty(openBets)){\n\t\tawait Promise.all(openBets.map(async openBet => {\n\t\t\tawait Promise.all(openBet.events.map(async (event, eventIdx) => {\n\t\t\t\tlet eventStatus = 'Pending';\n\t\t\t\tconst response = await axios.get(`https://jsonodds.com/api/results/getbyeventid/${event.ID}?oddType=${event.OddDetail.OddType}`);\n\t\t\t\tif(response.data.length === 1){\n\t\t\t\t\tconst result = Object.assign({}, response.data[0]);\n\t\t\t\t\tif(!_.isEmpty(result)){\n\t\t\t\t\t\tconsole.log(result)\n\t\t\t\t\t\tif(result.Final){\n\t\t\t\t\t\t\tswitch(result.FinalType){\n\t\t\t\t\t\t\t\tcase 'Finished':\n\t\t\t\t\t\t\t\t\tswitch(event.BetDetail.BetType){\n\t\t\t\t\t\t\t\t\t\tcase 'M-Line':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.HomeScore) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(event.Sport === 7){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost' \n\t\t\t\t\t\t\t\t\t\t\t\t\t}else{ \n\t\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push' \n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Spread':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) - Number(result.AwayScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) - Number(result.HomeScore) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) > Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) > Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) < Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) < Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Home' && Number(result.HomeScore) + Number(event.BetDetail.OddPoint) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Away' && Number(result.AwayScore) + Number(event.BetDetail.OddPoint) === Number(result.HomeScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Total':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === 0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'WonHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) - Number(event.BetDetail.OddPoint) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.Sport === 7 && event.BetDetail.OddTarget === 'Under' && Number(event.BetDetail.OddPoint) - (Number(result.HomeScore) + Number(result.AwayScore)) === -0.25:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'LostHalf';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) < Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) > Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Over' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\tcase event.BetDetail.OddTarget === 'Under' && Number(result.HomeScore) + Number(result.AwayScore) === Number(event.BetDetail.OddPoint):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Push';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase 'Draw':\n\t\t\t\t\t\t\t\t\t\t\tswitch(true){\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) === Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Won';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '1-0':\n\t\t\t\t\t\t\t\t\t\t\t\tcase result.BinaryScore === '0-1':\n\t\t\t\t\t\t\t\t\t\t\t\tcase Number(result.HomeScore) !== Number(result.AwayScore):\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Lost';\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Canceled':\n\t\t\t\t\t\t\t\t\teventStatus = 'Canceled'\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'Postponed':\n\t\t\t\t\t\t\t\t\teventStatus = 'Postponed'\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\teventStatus = 'Review'\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teventStatus = 'Pending';\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\teventStatus = 'Review';\n\t\t\t\t\t}\n\t\t\t\t\tawait OpenBet.findOneAndUpdate({orderNumber: openBet.orderNumber, events: {$elemMatch: {'ID': event.ID, 'OddPickID': event.OddPickID, 'BetDetail.OddType': event.BetDetail.OddType}} } , { '$set': { 'events.$.Status': eventStatus, 'events.$.Result': result }})\n\t\t\t\t\tconsole.log('updated event result')\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(response.data)\n\t\t\t\t}\n\t\t\t})).then(() => {\n\t\t\t\tconsole.log('this bet result done'\n\t\t\t)}).catch((error) => {\n\t\t\t\tconsole.log('bet result update error')\n\t\t\t\tthrow error\n\t\t\t})\n\t\t})).then(() => {\n\t\t\tconsole.log('all open bets updated')\n\t\t}).catch((error) => {\n\t\t\tconsole.log('all open bets updated error')\n\t\t\tthrow error\n\t\t})\n\t}else{\n\t\tconsole.log('openBet is empty')\n\t}\n\n}\n\n\nexport default openBetPending\n\n\n"]}